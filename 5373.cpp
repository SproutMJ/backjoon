#include <iostream>
#include <queue>
#include <algorithm>

using namespace std;
char board[9][12] = {
        {' ',' ',' ','w','w','w',' ',' ',' ',' ',' ',' '},
        {' ',' ',' ','w','w','w',' ',' ',' ',' ',' ',' '},
        {' ',' ',' ','w','w','w',' ',' ',' ',' ',' ',' '},
        {'g','g','g','r','r','r','b','b','b','o','o','o'},
        {'g','g','g','r','r','r','b','b','b','o','o','o'},
        {'g','g','g','r','r','r','b','b','b','o','o','o'},
        {' ',' ',' ','y','y','y',' ',' ',' ',' ',' ',' '},
        {' ',' ',' ','y','y','y',' ',' ',' ',' ',' ',' '},
        {' ',' ',' ','y','y','y',' ',' ',' ',' ',' ',' '},
};
//
//char board[9][12] = {
//        {' ', ' ', ' ', '1', '2', '3', ' ', ' ', ' ', ' ', ' ', ' '},
//        {' ', ' ', ' ', '4', '5', '6', ' ', ' ', ' ', ' ', ' ', ' '},
//        {' ', ' ', ' ', '7', '8', '9', ' ', ' ', ' ', ' ', ' ', ' '},
//        {'1', '2', '3', '1', '2', '3', '1', '2', '3', '1', '2', '3'},
//        {'4', '5', '6', '4', '5', '6', '4', '5', '6', '4', '5', '6'},
//        {'7', '8', '9', '7', '8', '9', '7', '8', '9', '7', '8', '9'},
//        {' ', ' ', ' ', '1', '2', '3', ' ', ' ', ' ', ' ', ' ', ' '},
//        {' ', ' ', ' ', '4', '5', '6', ' ', ' ', ' ', ' ', ' ', ' '},
//        {' ', ' ', ' ', '6', '7', '9', ' ', ' ', ' ', ' ', ' ', ' '},
//};

void move(char b[][12], char side, char di) {
    switch (side) {
        case 'U':
            if (di == '-') {
                for (int i = 0; i < 2; i++) {
                    char t = b[0][5];
                    b[0][5] = b[1][5];
                    b[1][5] = b[2][5];
                    b[2][5] = b[2][4];
                    b[2][4] = b[2][3];
                    b[2][3] = b[1][3];
                    b[1][3] = b[0][3];
                    b[0][3] = b[0][4];
                    b[0][4] = t;
                }

                for (int j = 0; j < 3; j++) {
                    char t = b[3][11];
                    for (int i = 11; i >= 1; i--) {
                        b[3][i] = b[3][i - 1];
                    }
                    b[3][0] = t;
                }
            } else {
                for (int k = 0; k < 3; k++) {
                    for (int i = 0; i < 2; i++) {
                        char t = b[0][5];
                        b[0][5] = b[1][5];
                        b[1][5] = b[2][5];
                        b[2][5] = b[2][4];
                        b[2][4] = b[2][3];
                        b[2][3] = b[1][3];
                        b[1][3] = b[0][3];
                        b[0][3] = b[0][4];
                        b[0][4] = t;
                    }

                    for (int j = 0; j < 3; j++) {
                        char t = b[3][11];
                        for (int i = 11; i >= 1; i--) {
                            b[3][i] = b[3][i - 1];
                        }
                        b[3][0] = t;
                    }
                }
            }
            break;

        case 'D':
            if (di == '-') {
                for (int i = 0; i < 2; i++) {
                    char t = b[6][5];
                    b[6][5] = b[7][5];
                    b[7][5] = b[8][5];
                    b[8][5] = b[8][4];
                    b[8][4] = b[8][3];
                    b[8][3] = b[7][3];
                    b[7][3] = b[6][3];
                    b[6][3] = b[6][4];
                    b[6][4] = t;
                }

                for (int j = 0; j < 3; j++) {
                    char t = b[5][0];
                    for (int i = 0; i < 11; i++) {
                        b[5][i] = b[5][i + 1];
                    }
                    b[5][11] = t;
                }
            } else {
                for (int k = 0; k < 3; k++) {
                    for (int i = 0; i < 2; i++) {
                        char t = b[6][5];
                        b[6][5] = b[7][5];
                        b[7][5] = b[8][5];
                        b[8][5] = b[8][4];
                        b[8][4] = b[8][3];
                        b[8][3] = b[7][3];
                        b[7][3] = b[6][3];
                        b[6][3] = b[6][4];
                        b[6][4] = t;
                    }

                    for (int j = 0; j < 3; j++) {
                        char t = b[5][0];
                        for (int i = 0; i < 11; i++) {
                            b[5][i] = b[5][i + 1];
                        }
                        b[5][11] = t;
                    }
                }
            }
            break;

        case 'F':
            if (di == '-') {
                for (int i = 0; i < 2; i++) {
                    char t = b[3][5];
                    b[3][5] = b[4][5];
                    b[4][5] = b[5][5];
                    b[5][5] = b[5][4];
                    b[5][4] = b[5][3];
                    b[5][3] = b[4][3];
                    b[4][3] = b[3][3];
                    b[3][3] = b[3][4];
                    b[3][4] = t;
                }

                for (int j = 0; j < 3; j++) {
                    char t = b[2][5];
                    b[2][5] = b[3][6];
                    b[3][6] = b[4][6];
                    b[4][6] = b[5][6];
                    b[5][6] = b[6][5];
                    b[6][5] = b[6][4];
                    b[6][4] = b[6][3];
                    b[6][3] = b[5][2];
                    b[5][2] = b[4][2];
                    b[4][2] = b[3][2];
                    b[3][2] = b[2][3];
                    b[2][3] = b[2][4];
                    b[2][4] = t;
                }
            } else {
                for (int k = 0; k < 3; k++) {
                    for (int i = 0; i < 2; i++) {
                        char t = b[3][5];
                        b[3][5] = b[4][5];
                        b[4][5] = b[5][5];
                        b[5][5] = b[5][4];
                        b[5][4] = b[5][3];
                        b[5][3] = b[4][3];
                        b[4][3] = b[3][3];
                        b[3][3] = b[3][4];
                        b[3][4] = t;
                    }

                    for (int j = 0; j < 3; j++) {
                        char t = b[2][5];
                        b[2][5] = b[3][6];
                        b[3][6] = b[4][6];
                        b[4][6] = b[5][6];
                        b[5][6] = b[6][5];
                        b[6][5] = b[6][4];
                        b[6][4] = b[6][3];
                        b[6][3] = b[5][2];
                        b[5][2] = b[4][2];
                        b[4][2] = b[3][2];
                        b[3][2] = b[2][3];
                        b[2][3] = b[2][4];
                        b[2][4] = t;
                    }
                }
            }
            break;
        case 'B':
            if (di == '-') {
                for (int i = 0; i < 2; i++) {
                    char t = b[3][11];
                    b[3][11] = b[4][11];
                    b[4][11] = b[5][11];
                    b[5][11] = b[5][10];
                    b[5][10] = b[5][9];
                    b[5][9] = b[4][9];
                    b[4][9] = b[3][9];
                    b[3][9] = b[3][10];
                    b[3][10] = t;
                }

                for (int j = 0; j < 3; j++) {
                    char t = b[5][8];
                    b[5][8] = b[4][8];
                    b[4][8] = b[3][8];
                    b[3][8] = b[0][5];
                    b[0][5] = b[0][4];
                    b[0][4] = b[0][3];
                    b[0][3] = b[3][0];
                    b[3][0] = b[4][0];
                    b[4][0] = b[5][0];
                    b[5][0] = b[8][3];
                    b[8][3] = b[8][4];
                    b[8][4] = b[8][5];
                    b[8][5] = t;
                }
            } else {
                for (int k = 0; k < 3; k++) {
                    for (int i = 0; i < 2; i++) {
                        char t = b[3][11];
                        b[3][11] = b[4][11];
                        b[4][11] = b[5][11];
                        b[5][11] = b[5][10];
                        b[5][10] = b[5][9];
                        b[5][9] = b[4][9];
                        b[4][9] = b[3][9];
                        b[3][9] = b[3][10];
                        b[3][10] = t;
                    }

                    for (int j = 0; j < 3; j++) {
                        char t = b[5][8];
                        b[5][8] = b[4][8];
                        b[4][8] = b[3][8];
                        b[3][8] = b[0][5];
                        b[0][5] = b[0][4];
                        b[0][4] = b[0][3];
                        b[0][3] = b[3][0];
                        b[3][0] = b[4][0];
                        b[4][0] = b[5][0];
                        b[5][0] = b[8][3];
                        b[8][3] = b[8][4];
                        b[8][4] = b[8][5];
                        b[8][5] = t;
                    }
                }
            }
            break;
        case 'L':
            if (di == '-') {
                for (int i = 0; i < 2; i++) {
                    char t = b[3][2];
                    b[3][2] = b[4][2];
                    b[4][2] = b[5][2];
                    b[5][2] = b[5][1];
                    b[5][1] = b[5][0];
                    b[5][0] = b[4][0];
                    b[4][0] = b[3][0];
                    b[3][0] = b[3][1];
                    b[3][1] = t;
                }

                for (int j = 0; j < 3; j++) {
                    char t = b[0][3];
                    for (int i = 0; i < 8; i++) {
                        b[i][3] = b[i + 1][3];
                    }
                    b[8][3] = b[5][11];
                    b[5][11] = b[4][11];
                    b[4][11] = b[3][11];
                    b[3][11] = t;
                }
            } else {
                for (int k = 0; k < 3; k++) {
                    for (int i = 0; i < 2; i++) {
                        char t = b[3][2];
                        b[3][2] = b[4][2];
                        b[4][2] = b[5][2];
                        b[5][2] = b[5][1];
                        b[5][1] = b[5][0];
                        b[5][0] = b[4][0];
                        b[4][0] = b[3][0];
                        b[3][0] = b[3][1];
                        b[3][1] = t;
                    }

                    for (int j = 0; j < 3; j++) {
                        char t = b[0][3];
                        for (int i = 0; i < 8; i++) {
                            b[i][3] = b[i + 1][3];
                        }
                        b[8][3] = b[5][11];
                        b[5][11] = b[4][11];
                        b[4][11] = b[3][11];
                        b[3][11] = t;
                    }
                }
            }
            break;
        case 'R':
            if (di == '-') {
                for (int i = 0; i < 2; i++) {
                    char t = b[3][8];
                    b[3][8] = b[4][8];
                    b[4][8] = b[5][8];
                    b[5][8] = b[5][7];
                    b[5][7] = b[5][6];
                    b[5][6] = b[4][6];
                    b[4][6] = b[3][6];
                    b[3][6] = b[3][7];
                    b[3][7] = t;
                }

                for (int i = 0; i < 3; i++) {
                    char t = b[8][5];
                    for (int i = 8; i >= 1; i--) {
                        b[i][5] = b[i - 1][5];
                    }
                    b[0][5] = b[3][9];
                    b[3][9] = b[4][9];
                    b[4][9] = b[5][9];
                    b[5][9] = t;
                }
            } else {
                for (int k = 0; k < 3; k++) {
                    for (int i = 0; i < 2; i++) {
                        char t = b[3][8];
                        b[3][8] = b[4][8];
                        b[4][8] = b[5][8];
                        b[5][8] = b[5][7];
                        b[5][7] = b[5][6];
                        b[5][6] = b[4][6];
                        b[4][6] = b[3][6];
                        b[3][6] = b[3][7];
                        b[3][7] = t;
                    }

                    for (int j = 0; j < 3; j++) {
                        char t = b[8][5];
                        for (int i = 8; i >= 1; i--) {
                            b[i][5] = b[i - 1][5];
                        }
                        b[0][5] = b[3][9];
                        b[3][9] = b[4][9];
                        b[4][9] = b[5][9];
                        b[5][9] = t;
                    }
                }
            }
            break;
    }
}

int main() {
    cin.tie(0);
    std::ios_base::sync_with_stdio(0);

    int t;
    cin >> t;
    while (t--) {
        int n;
        cin >> n;
        char _board[9][12];
        for (int i = 0; i < 9; i++) {
            for (int j = 0; j < 12; j++) {
                _board[i][j] = board[i][j];
            }
        }

        while (n--) {
            string f;
            cin >> f;
            move(_board, f[0], f[1]);
        }

        for (int i = 0; i < 3; i++) {
            for (int j = 3; j < 6; j++) {
                cout << _board[i][j];
            }
            cout << "\n";
        }
    }
}